{
  "version": 3,
  "sources": ["../../../../src/server/services/areas/areas.hooks.ts"],
  "sourcesContent": ["import type { HookContext } from \"@feathersjs/feathers\";\nimport {\n\talterItems,\n\tdisablePagination,\n\tdisallow,\n\tiff,\n\tiffElse,\n\tisProvider,\n\tparamsFromClient,\n} from \"feathers-hooks-common\";\nimport { Scheduler } from \"../../../lib/Scheduler\";\nimport { patchOrCreateArea } from \"../../hooks\";\nimport { addTrapInfoToAllTraps } from \"../../hooks/addTrapInfoToAllTraps\";\n\nexport default {\n\tbefore: {\n\t\tall: [],\n\t\tfind: [\n\t\t\tiff(\n\t\t\t\t(ctx: HookContext) => isProvider(\"server\")(ctx) || isProvider(\"rest\")(ctx),\n\t\t\t\t(ctx: HookContext) => {\n\t\t\t\t\tif (ctx.params.query) {\n\t\t\t\t\t\tctx.params.query.$limit = -1;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ctx;\n\t\t\t\t},\n\t\t\t\tdisablePagination(),\n\t\t\t),\n\t\t],\n\t\tget: [],\n\t\tcreate: [\n\t\t\tdisallow(\"rest\"),\n\t\t\tiffElse(\n\t\t\t\tisProvider(\"external\"),\n\t\t\t\t[paramsFromClient(\"patchSourceFromClient\"), patchOrCreateArea()],\n\t\t\t\t[patchOrCreateArea()],\n\t\t\t),\n\t\t],\n\t\tupdate: [disallow(\"rest\")],\n\t\tpatch: [disallow(\"rest\")],\n\t\tremove: [disallow(\"rest\")],\n\t},\n\n\tafter: {\n\t\tall: [],\n\t\tfind: [alterItems(addTrapInfoToAllTraps)],\n\t\tget: [alterItems(addTrapInfoToAllTraps)],\n\t\tcreate: [\n\t\t\talterItems(addTrapInfoToAllTraps),\n\t\t\t(ctx: HookContext): HookContext => {\n\t\t\t\tctx.service.emit(\"status\", {\n\t\t\t\t\t_id: ctx.data._id,\n\t\t\t\t\tstatus: \"success\",\n\t\t\t\t});\n\t\t\t\tScheduler.resume(ctx.data._id);\n\n\t\t\t\treturn ctx;\n\t\t\t},\n\t\t],\n\t\tupdate: [],\n\t\tpatch: [],\n\t\tremove: [],\n\t},\n\n\terror: {\n\t\tall: [],\n\t\tfind: [],\n\t\tget: [],\n\t\tcreate: [],\n\t\tupdate: [],\n\t\tpatch: [],\n\t\tremove: [],\n\t},\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mCAQO;AACP,uBAA0B;AAC1B,mBAAkC;AAClC,mCAAsC;AAEtC,IAAO,sBAAQ;AAAA,EACd,QAAQ;AAAA,IACP,KAAK,CAAC;AAAA,IACN,MAAM;AAAA,UACL;AAAA,QACC,CAAC,YAAqB,yCAAW,QAAQ,EAAE,GAAG,SAAK,yCAAW,MAAM,EAAE,GAAG;AAAA,QACzE,CAAC,QAAqB;AACrB,cAAI,IAAI,OAAO,OAAO;AACrB,gBAAI,OAAO,MAAM,SAAS;AAAA,UAC3B;AAEA,iBAAO;AAAA,QACR;AAAA,YACA,gDAAkB;AAAA,MACnB;AAAA,IACD;AAAA,IACA,KAAK,CAAC;AAAA,IACN,QAAQ;AAAA,UACP,uCAAS,MAAM;AAAA,UACf;AAAA,YACC,yCAAW,UAAU;AAAA,QACrB,KAAC,+CAAiB,uBAAuB,OAAG,gCAAkB,CAAC;AAAA,QAC/D,KAAC,gCAAkB,CAAC;AAAA,MACrB;AAAA,IACD;AAAA,IACA,QAAQ,KAAC,uCAAS,MAAM,CAAC;AAAA,IACzB,OAAO,KAAC,uCAAS,MAAM,CAAC;AAAA,IACxB,QAAQ,KAAC,uCAAS,MAAM,CAAC;AAAA,EAC1B;AAAA,EAEA,OAAO;AAAA,IACN,KAAK,CAAC;AAAA,IACN,MAAM,KAAC,yCAAW,kDAAqB,CAAC;AAAA,IACxC,KAAK,KAAC,yCAAW,kDAAqB,CAAC;AAAA,IACvC,QAAQ;AAAA,UACP,yCAAW,kDAAqB;AAAA,MAChC,CAAC,QAAkC;AAClC,YAAI,QAAQ,KAAK,UAAU;AAAA,UAC1B,KAAK,IAAI,KAAK;AAAA,UACd,QAAQ;AAAA,QACT,CAAC;AACD,mCAAU,OAAO,IAAI,KAAK,GAAG;AAE7B,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,QAAQ,CAAC;AAAA,IACT,OAAO,CAAC;AAAA,IACR,QAAQ,CAAC;AAAA,EACV;AAAA,EAEA,OAAO;AAAA,IACN,KAAK,CAAC;AAAA,IACN,MAAM,CAAC;AAAA,IACP,KAAK,CAAC;AAAA,IACN,QAAQ,CAAC;AAAA,IACT,QAAQ,CAAC;AAAA,IACT,OAAO,CAAC;AAAA,IACR,QAAQ,CAAC;AAAA,EACV;AACD;",
  "names": []
}
