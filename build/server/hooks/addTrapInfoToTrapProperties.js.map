{
  "version": 3,
  "sources": ["../../../src/server/hooks/addTrapInfoToTrapProperties.ts"],
  "sourcesContent": ["import type { Feature, LineString, Point } from \"@turf/helpers\";\nimport { isEmpty } from \"lodash\";\n\nfunction isArray(it: any): boolean {\n\tif (typeof Array.isArray === \"function\") {\n\t\treturn Array.isArray(it);\n\t}\n\n\treturn Object.prototype.toString.call(it) === \"[object Array]\";\n}\n\nconst addTrapInfoToTrapProperties = (\n\ttraps: Record<string, Feature<Point | LineString, radarTrap.Poi>[]>,\n): Feature<Point | LineString, radarTrap.Poi>[] =>\n\tObject.values(traps).reduce(\n\t\t(list, t) => {\n\t\t\tif (isArray(t)) {\n\t\t\t\tt.forEach(({ properties }) => {\n\t\t\t\t\tconst trapInfo = {} as radarTrap.trapInfo;\n\n\t\t\t\t\tconst _info = JSON.parse(JSON.stringify(properties.info));\n\n\t\t\t\t\ttrapInfo.id = properties.backend;\n\t\t\t\t\ttrapInfo.status = properties.status;\n\t\t\t\t\ttrapInfo.typeName = properties.type_name;\n\t\t\t\t\ttrapInfo.longitude = +properties.lng;\n\t\t\t\t\ttrapInfo.latitude = +properties.lat;\n\t\t\t\t\ttrapInfo.reason = isEmpty(properties.reason)\n\t\t\t\t\t\t? isEmpty(_info.reason)\n\t\t\t\t\t\t\t? false\n\t\t\t\t\t\t\t: _info.reason\n\t\t\t\t\t\t: properties.reason;\n\t\t\t\t\ttrapInfo.length = isEmpty(_info.length) ? false : _info.length;\n\t\t\t\t\ttrapInfo.duration = isEmpty(_info.duration) ? false : Math.round(Number(_info.duration) / 60);\n\t\t\t\t\ttrapInfo.delay = isEmpty(_info.delay) ? false : Math.round(Number(_info.delay) / 60);\n\t\t\t\t\ttrapInfo.createDate = properties.create_date !== \"01.01.1970\" && properties.create_date;\n\t\t\t\t\ttrapInfo.confirmDate = properties.confirm_date !== \"01.01.1970\" && properties.confirm_date;\n\t\t\t\t\ttrapInfo.vmax = isEmpty(properties.vmax) ? false : properties.vmax === \"?\" ? \"V\" : properties.vmax;\n\t\t\t\t\ttrapInfo.typeDesc = isEmpty(properties.type_desc) ? false : properties.type_desc;\n\t\t\t\t\ttrapInfo.typeText = isEmpty(properties.type_text) ? false : properties.type_text;\n\t\t\t\t\ttrapInfo.country = isEmpty(properties.address.country) ? false : properties.address.country;\n\t\t\t\t\ttrapInfo.state = isEmpty(properties.address.state) ? false : properties.address.state;\n\t\t\t\t\ttrapInfo.zipCode = isEmpty(properties.address.zip_code) ? false : properties.address.zip_code;\n\t\t\t\t\ttrapInfo.city = isEmpty(properties.address.city) ? false : properties.address.city;\n\t\t\t\t\ttrapInfo.cityDistrict = isEmpty(properties.address.city_district)\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: properties.address.city_district;\n\t\t\t\t\ttrapInfo.street = isEmpty(properties.address.street) ? false : properties.address.street;\n\n\t\t\t\t\tproperties.trapInfo = trapInfo; // properties are mutable\n\t\t\t\t});\n\n\t\t\t\treturn [...list, ...t];\n\t\t\t}\n\n\t\t\treturn list;\n\t\t},\n\t\t[] as Feature<Point | LineString, radarTrap.Poi>[],\n\t);\n\nexport { addTrapInfoToTrapProperties };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAwB;AAExB,SAAS,QAAQ,IAAkB;AAClC,MAAI,OAAO,MAAM,YAAY,YAAY;AACxC,WAAO,MAAM,QAAQ,EAAE;AAAA,EACxB;AAEA,SAAO,OAAO,UAAU,SAAS,KAAK,EAAE,MAAM;AAC/C;AAEA,MAAM,8BAA8B,CACnC,UAEA,OAAO,OAAO,KAAK,EAAE;AAAA,EACpB,CAAC,MAAM,MAAM;AACZ,QAAI,QAAQ,CAAC,GAAG;AACf,QAAE,QAAQ,CAAC,EAAE,WAAW,MAAM;AAC7B,cAAM,WAAW,CAAC;AAElB,cAAM,QAAQ,KAAK,MAAM,KAAK,UAAU,WAAW,IAAI,CAAC;AAExD,iBAAS,KAAK,WAAW;AACzB,iBAAS,SAAS,WAAW;AAC7B,iBAAS,WAAW,WAAW;AAC/B,iBAAS,YAAY,CAAC,WAAW;AACjC,iBAAS,WAAW,CAAC,WAAW;AAChC,iBAAS,aAAS,uBAAQ,WAAW,MAAM,QACxC,uBAAQ,MAAM,MAAM,IACnB,QACA,MAAM,SACP,WAAW;AACd,iBAAS,aAAS,uBAAQ,MAAM,MAAM,IAAI,QAAQ,MAAM;AACxD,iBAAS,eAAW,uBAAQ,MAAM,QAAQ,IAAI,QAAQ,KAAK,MAAM,OAAO,MAAM,QAAQ,IAAI,EAAE;AAC5F,iBAAS,YAAQ,uBAAQ,MAAM,KAAK,IAAI,QAAQ,KAAK,MAAM,OAAO,MAAM,KAAK,IAAI,EAAE;AACnF,iBAAS,aAAa,WAAW,gBAAgB,gBAAgB,WAAW;AAC5E,iBAAS,cAAc,WAAW,iBAAiB,gBAAgB,WAAW;AAC9E,iBAAS,WAAO,uBAAQ,WAAW,IAAI,IAAI,QAAQ,WAAW,SAAS,MAAM,MAAM,WAAW;AAC9F,iBAAS,eAAW,uBAAQ,WAAW,SAAS,IAAI,QAAQ,WAAW;AACvE,iBAAS,eAAW,uBAAQ,WAAW,SAAS,IAAI,QAAQ,WAAW;AACvE,iBAAS,cAAU,uBAAQ,WAAW,QAAQ,OAAO,IAAI,QAAQ,WAAW,QAAQ;AACpF,iBAAS,YAAQ,uBAAQ,WAAW,QAAQ,KAAK,IAAI,QAAQ,WAAW,QAAQ;AAChF,iBAAS,cAAU,uBAAQ,WAAW,QAAQ,QAAQ,IAAI,QAAQ,WAAW,QAAQ;AACrF,iBAAS,WAAO,uBAAQ,WAAW,QAAQ,IAAI,IAAI,QAAQ,WAAW,QAAQ;AAC9E,iBAAS,mBAAe,uBAAQ,WAAW,QAAQ,aAAa,IAC7D,QACA,WAAW,QAAQ;AACtB,iBAAS,aAAS,uBAAQ,WAAW,QAAQ,MAAM,IAAI,QAAQ,WAAW,QAAQ;AAElF,mBAAW,WAAW;AAAA,MACvB,CAAC;AAED,aAAO,CAAC,GAAG,MAAM,GAAG,CAAC;AAAA,IACtB;AAEA,WAAO;AAAA,EACR;AAAA,EACA,CAAC;AACF;",
  "names": []
}
