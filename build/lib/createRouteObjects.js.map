{
  "version": 3,
  "sources": ["../../src/lib/createRouteObjects.ts"],
  "sourcesContent": ["import { createCronJobAsync } from \"./createCronJob\";\n\nimport type * as utils from \"@iobroker/adapter-core\";\n\nconst createRouteObjects = async (\n\tthat: utils.AdapterInstance,\n\troute: radarTrap.Route,\n): Promise<void> => {\n\tawait that.setObjectAsync(route._id, {\n\t\ttype: \"device\",\n\t\tcommon: { name: route.description! },\n\t\tnative: { type: \"ROUTE\" },\n\t});\n\n\tawait createCronJobAsync(that, route._id);\n\n\troute.directions?.forEach(async (direction, idx) => {\n\t\tawait that.createChannelAsync(`${route._id}`, `direction-${idx}`, {\n\t\t\tname: `Direction-${idx}`,\n\t\t});\n\n\t\t//\n\t\tawait that.createChannelAsync(\n\t\t\t`${route._id}`,\n\t\t\t`direction-${idx}-infos`,\n\t\t\t{\n\t\t\t\tname: `Direction-${idx} Infos`,\n\t\t\t},\n\t\t);\n\n\t\tawait that\n\t\t\t.createStateAsync(\n\t\t\t\t`${route._id}`,\n\t\t\t\t`direction-${idx}-infos`,\n\t\t\t\t\"description\",\n\t\t\t\t{\n\t\t\t\t\tname: \"Description\",\n\t\t\t\t\tdefAck: true,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trole: \"text\",\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(() =>\n\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t`${route._id}.direction-${idx}-infos.description`,\n\t\t\t\t\t`${route.description}`,\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\n\t\tawait that\n\t\t\t.createStateAsync(\n\t\t\t\t`${route._id}`,\n\t\t\t\t`direction-${idx}-infos`,\n\t\t\t\t\"profile\",\n\t\t\t\t{\n\t\t\t\t\tname: \"Profile\",\n\t\t\t\t\tdefAck: true,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trole: \"text\",\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(() =>\n\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t`${route._id}.direction-${idx}-infos.profile`,\n\t\t\t\t\t`${route.activeProfile!.name}`,\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\n\t\tawait that\n\t\t\t.createStateAsync(\n\t\t\t\t`${route._id}`,\n\t\t\t\t`direction-${idx}-infos`,\n\t\t\t\t\"exclusions\",\n\t\t\t\t{\n\t\t\t\t\tname: \"Exclusions\",\n\t\t\t\t\tdefAck: true,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\ttype: \"array\",\n\t\t\t\t\trole: \"list\",\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(() =>\n\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t`${route._id}.direction-${idx}-infos.exclusions`,\n\t\t\t\t\t`${JSON.stringify(route.activeProfile!.actualExclusion)}`,\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\t\t//\n\n\t\tawait that\n\t\t\t.createStateAsync(\n\t\t\t\t`${route._id}`,\n\t\t\t\t`direction-${idx}-infos`,\n\t\t\t\t\"duration\",\n\t\t\t\t{\n\t\t\t\t\tname: \"Duration\",\n\t\t\t\t\tunit: \"s\",\n\t\t\t\t\tdefAck: true,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\ttype: \"number\",\n\t\t\t\t\trole: \"value\",\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(() =>\n\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t`${route._id}.direction-${idx}-infos.duration`,\n\t\t\t\t\tMath.round(direction.direction.duration),\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\n\t\tawait that\n\t\t\t.createStateAsync(\n\t\t\t\t`${route._id}`,\n\t\t\t\t`direction-${idx}-infos`,\n\t\t\t\t\"distance\",\n\t\t\t\t{\n\t\t\t\t\tname: \"Distance\",\n\t\t\t\t\tunit: \"m\",\n\t\t\t\t\tdefAck: true,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\ttype: \"number\",\n\t\t\t\t\trole: \"value\",\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(\n\t\t\t\tasync () =>\n\t\t\t\t\tawait that.setStateAsync(\n\t\t\t\t\t\t`${route._id}.direction-${idx}-infos.distance`,\n\t\t\t\t\t\tMath.round(direction.direction.distance),\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t),\n\t\t\t);\n\n\t\tlet totalTrapsCount = 0;\n\t\tfor (const [trapName, traps] of Object.entries(direction.traps)) {\n\t\t\tconst newTraps = traps.map((trap) => ({\n\t\t\t\ttype: trap.type,\n\t\t\t\tgeometry: trap.geometry,\n\t\t\t\tproperties: { ...trap.properties?.trapInfo },\n\t\t\t}));\n\n\t\t\ttotalTrapsCount += newTraps.length;\n\n\t\t\tawait that\n\t\t\t\t.createStateAsync(\n\t\t\t\t\t`${route._id}`,\n\t\t\t\t\t`direction-${idx}`,\n\t\t\t\t\t`${trapName}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: `${trapName}`,\n\t\t\t\t\t\tdefAck: true,\n\t\t\t\t\t\tread: true,\n\t\t\t\t\t\twrite: false,\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\trole: \"list\",\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.then(() =>\n\t\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t\t`${route._id}.direction-${idx}.${trapName}`,\n\t\t\t\t\t\tJSON.stringify(newTraps),\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\tawait that\n\t\t\t\t.createStateAsync(\n\t\t\t\t\t`${route._id}`,\n\t\t\t\t\t`direction-${idx}`,\n\t\t\t\t\t`${trapName}Count`,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: `${trapName} Count`,\n\t\t\t\t\t\tdefAck: true,\n\t\t\t\t\t\tread: true,\n\t\t\t\t\t\twrite: false,\n\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\trole: \"value\",\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.then(() =>\n\t\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t\t`${route._id}.direction-${idx}.${trapName}Count`,\n\t\t\t\t\t\tnewTraps.length,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t}\n\n\t\tawait that\n\t\t\t.createStateAsync(\n\t\t\t\t`${route._id}`,\n\t\t\t\t`direction-${idx}-infos`,\n\t\t\t\t\"totalTrapsCount\",\n\t\t\t\t{\n\t\t\t\t\tname: \"totalTraps Count\",\n\t\t\t\t\tdefAck: true,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\ttype: \"number\",\n\t\t\t\t\trole: \"value\",\n\t\t\t\t},\n\t\t\t)\n\t\t\t.then(() =>\n\t\t\t\tthat.setStateAsync(\n\t\t\t\t\t`${route._id}.direction-${idx}-infos.totalTrapsCount`,\n\t\t\t\t\ttotalTrapsCount,\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\t});\n};\n\nexport { createRouteObjects };\n"],
  "mappings": "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",
  "names": ["_a"]
}
