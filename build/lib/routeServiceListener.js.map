{
  "version": 3,
  "sources": ["../../src/lib/routeServiceListener.ts"],
  "sourcesContent": ["import { createRouteObjects } from \"./createRouteObjects\";\nimport { Scheduler } from \"./Scheduler\";\n\nimport type { Application } from \"@feathersjs/express\";\nimport type { HookContext } from \"../server/app\";\n\nconst routeServiceListener = (that: ioBroker.AdapterInstanceWithI18n, feathers: Application): void => {\n\tfeathers.service(\"routes\").on(\"status\", async (statusWithId: radarTrap.GenericStatusWithId) => {\n\t\tScheduler.setStatus(statusWithId);\n\t});\n\n\tfeathers.service(\"routes\").on(\"removed\", async (route: radarTrap.Route) => {\n\t\tawait that.deleteDeviceAsync(route._id);\n\n\t\tScheduler.delete(route._id);\n\t});\n\n\tfeathers.service(\"routes\").on(\"created\", async (route: radarTrap.Route, ctx: HookContext) => {\n\t\tif (!ctx.params.patchSourceFromServer) {\n\t\t\tconst routeData = {\n\t\t\t\t_id: route._id,\n\t\t\t\tsrc: route.src,\n\t\t\t\tdst: route.dst,\n\t\t\t\tactiveProfile: route.activeProfile,\n\t\t\t\tmaxTrapDistance: route.maxTrapDistance,\n\t\t\t\tcron: route.cron,\n\t\t\t};\n\n\t\t\tScheduler.schedule(routeData, \"ROUTE\");\n\t\t}\n\n\t\tawait createRouteObjects(that, route);\n\t});\n};\n\nexport { routeServiceListener };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAmC;AACnC,uBAA0B;AAK1B,MAAM,uBAAuB,CAAC,MAAwC,aAAgC;AACrG,WAAS,QAAQ,QAAQ,EAAE,GAAG,UAAU,OAAO,iBAAgD;AAC9F,+BAAU,UAAU,YAAY;AAAA,EACjC,CAAC;AAED,WAAS,QAAQ,QAAQ,EAAE,GAAG,WAAW,OAAO,UAA2B;AAC1E,UAAM,KAAK,kBAAkB,MAAM,GAAG;AAEtC,+BAAU,OAAO,MAAM,GAAG;AAAA,EAC3B,CAAC;AAED,WAAS,QAAQ,QAAQ,EAAE,GAAG,WAAW,OAAO,OAAwB,QAAqB;AAC5F,QAAI,CAAC,IAAI,OAAO,uBAAuB;AACtC,YAAM,YAAY;AAAA,QACjB,KAAK,MAAM;AAAA,QACX,KAAK,MAAM;AAAA,QACX,KAAK,MAAM;AAAA,QACX,eAAe,MAAM;AAAA,QACrB,iBAAiB,MAAM;AAAA,QACvB,MAAM,MAAM;AAAA,MACb;AAEA,iCAAU,SAAS,WAAW,OAAO;AAAA,IACtC;AAEA,cAAM,8CAAmB,MAAM,KAAK;AAAA,EACrC,CAAC;AACF;",
  "names": []
}
